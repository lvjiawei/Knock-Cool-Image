<?php/* * user.php * get the user's imformation * @package: Knock-Cool-Image/lib/imformation * @author zhuhaofeng * @version 0.1 * @copyright 2010 * @access public */require(realpath("./")."/lib/MySQL.php");class user{	private $user;	private $email;	private $password;	private $nickname;//	private $right;	private $pwquestion;	private $pwanswer;	private $birthday;	private $temp;	private $sql;	private $avatar;	private $action;	function __construct($param,$mail)	{		$this->action=$param;		if($this->action==1)		{			$this->sql=connect();			$db=mysql_select_db("user_db");			if(!$db)die("Cannot connect:".mysql_error());			$result=mysql_query("select * from userinfo where e_mail=".$mail."");			$num=mysql_num_rows($result);			if($num==0){				return false;			}else{				$row=mysql_fetch_array($result);				if($row!=""){					$this->temp=$row;					$this->user=$row['uid'];					$this->email=$row['e_mail'];					$this->password=$row['password'];					$this->nickname=$row['nickname'];					$this->pwquestion=$row['pwquestion'];					$this->pwanswer=$row['pwanswer'];					$this->birthday=$row['birthday'];//					$this->right=$row['right'];					$this->avatar=$row['avatar'];/*					$_SESSION['user']=$row['uid'];					$_SESSION['password']=$row['password'];					$_SESSION['pwquestion']=$row['pwquestion'];					$_SESSION['pwanswer']=$row['pwanswer'];//					$_SESSION['']=$row[''];		*/									return true;				}else					return false;			}		}else if($this->action==2){			$this->sql=new MySQL();			$this->sql->setQuery("select * from userinfo where email=".$mail."");			if(!$this->sql->query())				return false;			else				$this->temp=mysql_fetch_array($this->sql->query());						if($this->temp!=""){				return true;			}			else				return false;		}else			return false;	}	function __destrcut()	{		if(isset ($this->user))			unset ($this->user);		if(isset ($this->email))			unset ($this->email);		if(isset ($this->nickname))			unset ($this->nickname);		if(isset ($this->pwquestion))			unset ($this->pwquestion);		if(isset ($this->pwanswer))			unset ($this->pwanswer);		if(isset ($this->temp))			unset ($this->temp);		if(isset ($this->password))			unset ($this->password);		if(isset ($this->sql))			unset ($this->sql);		if(isset ($this->avatar))			unset ($this->avatar);		if(isset ($this->birthday))			unset ($this->birthday);//		if(isset ($this->right))//			unset ($this->right);		if(isset ($this->action))			unset ($this->action);	}	public function getRow()	{		if(action==1)			return $this->temp;	}	public function getUser()	{		if(action==1)			return $this->user;		else			return;	}	public function getEmail()	{		if(action==1)			return $this->email;		else			return;	}	public function getPassword()	{		if($this->action==1)			return $this->password;		else			return;	}	public function getNickname()	{		if($this->action==1)			return $this->nickname;		else			return;	}	public function getPwquestion()	{		if($this->action==1)			return $this->pwquestion;		else			return;	}	public function getPwanswer()	{		if($this->action==1)			return $this->pwanswer;		else			return;	}	public function getBirhday()	{		if($this->action==1)			return $this->birthday;		else			return;	}	public function getAvatar()	{		if($this->action==1)			return $this->avatar;		else			return;	}/*	public function getRight()	{		if($this->action==1)			return $this->right;		else			return;	}*/}?>